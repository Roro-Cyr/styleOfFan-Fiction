# styleOfFan-Fiction

A set of Python scripts used in my bachelor thesis, as well as a link to the dataset and study.

These scripts are meant to be used in conjunction with an AO3 scrapper which can be found at: https://github.com/radiolarian/AO3Scraper.
As well as the stylo package from R. You can learn more about it in this paper: https://journal.r-project.org/archive/2016/RJ-2016-007/index.html [M. Eder, J. Rybicki, and M. Kestemont, “Stylometry with R : a package for computational text analysis,” 2016.]

## Links

### Study

You can read the study that uses this code at: https://repository.tudelft.nl/record/uuid:6ea8dbae-f91b-457c-af8b-d5a31d27bdce

### Dataset

The dataset can be found at: https://mega.nz/folder/WXAVAbyB#ypguDVDBm-98QNrK5rrUGA

If you are an author that wish for their work to be removed from that repository, you may contact me at: R.C.Lambert@student.tudelft.nl
This email will stay valid for the rest of my studies and I will updated it when it changes.

## Scripts

### `csv_to_id_kudos_hits.py`

This script extracts the ids, kudo, and hits from the output of the `ao3_get_fanfics_py` script in the AO3 scrapper. It can be used to select columns from any csv in general but I only used it for this.

**Example Usage:**
```sh
python csv_to_id_kudos_hits.py someDataSet.csv someDatasetIdsKudosHits.csv work_id kudos hits
```

### `cutdown.py` and `cutdownWithNarnia.py`

These script processes the output of running stylo to only retain the distance data to the canon works. This takes the distance_table text file generated by stylo and makes a shorter file with the Id of the work and it's distance to the canon work. This works by taking the last column in the table, which should be the canon as all the ids are numbers and so are earlier alphabetically.

Using `cutdownWithNarnia.py` simply takes the last two columns instead, outputing a txt with a distance for both canons (Worm and Narnia in my case)

**Example Usage:**
```sh
python cutdown.py distance_table_100mfw_0c.txt some_dataset_distance_to_some_canon.txt
```
```sh
python cutdownWithNarnia.py distance_table_100mfw_0c.txt some_dataset_distance_to_two_canons.txt
```

### `zipDistanceKudos.py` and `zipDistanceKudosWithNarnia.py`

These scripts mix the results of `csv_to_id_kudos_hits.py` and `cutdown.py` (or `cutdownWithNarnia.py`). This intersection merges the data using the ids to process. Using `zipDistanceKudosWithNarnia.py` is nescessary to process the output of `cutdownWithNarnia.py`

**Example Usage:**
```sh
python zipDistanceKudos.py someDatasetIdsKudosHits.csv some_dataset_distance_to_some_canon.txt someDatasetKudosHitsDistances.csv
```
```sh
python zipDistanceKudosWithNarnia.py someDatasetIdsKudosHits.csv some_dataset_distance_to_two_canons.txt someDatasetKudosHitsDistancesToTwoCanons.csv
```

### `NormaliseKudosPercentage.py`

This script calculates the percentage of kudos that fan-fictions occupy in a dataset outputted by `zipDistanceKudos.py`

**Example Usage:**
```sh
python normaliseKudosPercentage.py someDatasetKudosHitsDistances.csv someDatasetIdsKudosHitsDistanceNormalised.csv  
```

### `medianAverage.py` and `medianAverageWithNarnia.py`

These scripts process the output of `NormaliseKudosPercentage.py`, grouping data by distance ranges, and calculating the median and average for kudos, hits, and their percentages. `medianAverageWithNarnia.py` processes the files that went through the pipeline with two canons, and outputs results two separate files.

**Example Usage:**
```sh
python medianAverageWithNarnia.py someDatasetIdsKudosHitsDistanceNormalised.csv someDatasetRanges.csv  
```
```sh
python medianAverageWithNarnia.py someDatasetIdsKudosHitsDistanceToTwoCanonsNormalised.csv someDatasetRangesToCanonOne.csv someDatasetRangesToCanonTwo.csv   
```
